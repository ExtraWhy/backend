<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebSocket Client</title>
</head>
<body>
  <h2>WebSocket Client</h2>
  <label for="ws-url">WebSocket URL:</label>
  <input type="text" id="ws-url" placeholder="ws://localhost:8083/ws">
  <br><br>

  <label for="id">ID (integer):</label>
  <input type="number" id="id">
  <br><br>

  <label for="bet">Bet (integer):</label>
  <input type="number" id="bet">
  <br><br>



  <button onclick="connectWebSocket()">Connect</button>
  <button onclick="sendData()">Send</button>
  <button onclick="sendLogin()">Send Login</button>

  <p id="status">Status: Not connected</p>

  <script>
    let socket;

    function connectWebSocket() {
      const url = document.getElementById('ws-url').value;
      socket = new WebSocket("ws://localhost:8083/ws");
      

      socket.onopen = () => {
        document.getElementById('status').textContent = 'Status: Connected';
        console.log('WebSocket connected');
        sendLogin(1)
      };

      socket.onmessage = (event) => {
        console.log('Received:', event.data);
      };

      socket.onerror = (error) => {
        console.error('WebSocket error:', error);
      };

      socket.onclose = () => {
        document.getElementById('status').textContent = 'Status: Disconnected';
        console.log('WebSocket closed');
      };
    }

    function sendLogin() {
      if (!socket || socket.readyState !== WebSocket.OPEN) {
        alert('WebSocket is not connected!');
        return;
      }

      const id = parseInt(document.getElementById('id').value, 10);

      const payload = {
        id: 1,
      };

      socket.send(JSON.stringify(payload));
      console.log('Sent:', payload);
    }


    function sendData() {
      if (!socket || socket.readyState !== WebSocket.OPEN) {
        alert('WebSocket is not connected!');
        return;
      }

      const id = parseInt(document.getElementById('id').value, 10);
      const message = parseInt(document.getElementById('bet').value, 10);

      const payload = {
        id: id,
        bet: message
      };

      socket.send(JSON.stringify(payload));
      console.log('Sent:', payload);
    }
  </script>
</body>
</html>
